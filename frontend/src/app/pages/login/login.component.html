<div class="login-container">
  <div class="login-card">
    <div class="login-header">
      <button class="back-btn" (click)="goToHome()" title="Voltar para home" aria-label="Voltar para pÃ¡gina inicial">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">ðŸ“š</span>
        </div>
        <h1>Bem-vindo de volta!</h1>
        <p>FaÃ§a login para acessar sua conta</p>
      </div>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <div class="form-group">
        <label for="email">
          <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Email
        </label>
        <div class="input-wrapper">
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="Digite seu email"
            [class.error]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
            aria-describedby="email-error"
            autocomplete="email"
            required
          />
        </div>
        <div class="error-message" id="email-error" *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched" role="alert">
          {{ getFieldError('email') }}
        </div>
      </div>

      <div class="form-group">
        <label for="password">
          <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
            <circle cx="12" cy="16" r="1" fill="currentColor"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Senha
        </label>
        <div class="input-wrapper">
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="Digite sua senha"
            [class.error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
            aria-describedby="password-error"
            autocomplete="current-password"
            required
          />
        </div>
        <div class="error-message" id="password-error" *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" role="alert">
          {{ getFieldError('password') }}
        </div>
      </div>

      <div class="form-options">
        <label class="checkbox-container">
          <input type="checkbox" formControlName="rememberMe" aria-describedby="remember-me-desc" />
          <span class="checkmark"></span>
          Lembrar de mim
        </label>
        <a href="#" class="forgot-password" role="button" tabindex="0">Esqueceu a senha?</a>
      </div>

      <div class="error-message general-error" *ngIf="errorMessage" role="alert" aria-live="polite">
        {{ errorMessage }}
      </div>

      <button
        type="submit"
        class="login-btn"
        [disabled]="isLoading"
        [class.loading]="isLoading"
        [attr.aria-label]="isLoading ? 'Entrando...' : 'Entrar'"
        [attr.aria-describedby]="isLoading ? 'loading-text' : null"
      >
        <span *ngIf="!isLoading" class="btn-content">
          <svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Entrar
        </span>
        <span *ngIf="isLoading" class="loading-spinner" id="loading-text">
          <svg class="spinner" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" opacity="0.25"/>
            <path d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" fill="currentColor"/>
          </svg>
          Entrando...
        </span>
      </button>
    </form>

    <div class="login-footer">
      <div class="divider">
        <span>ou</span>
      </div>
      <p>NÃ£o tem uma conta? <a (click)="goToRegister()" class="register-link" role="button" tabindex="0">Cadastre-se aqui</a></p>
    </div>
  </div>

  <div class="login-illustration">
    <div class="illustration-content">
      <div class="book-stack">
        <div class="book book-1"></div>
        <div class="book book-2"></div>
        <div class="book book-3"></div>
        <div class="book book-4"></div>
      </div>
      <h3>Bem-vindo de volta!</h3>
      <p>Acesse sua conta para continuar gerenciando a biblioteca</p>
    </div>
  </div>
</div>
